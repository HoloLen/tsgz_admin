webpackJsonp([7],{545:function(e,t,a){a(687);var i=a(200)(a(603),a(730),"data-v-534a460b",null);e.exports=i.exports},552:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAqFBMVEX///8AAAAAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneMAneO2iO8PAAAAN3RSTlMAAAyA2/7rnh4g2vE3CdTmEm9+zeVBK8rT+WRX+kBMEFg8LjBKUOHRPzS6446ZGOz2I1Pg7qgsg2bf9AAAAAlwSFlzAAALEwAACxMBAJqcGAAAARZJREFUaN7t2ttOAjEYBOBWjiuoCCqwyMoelIMIeJz3fzNSYuwa6YaEv4lsZm4n2S9NuslcVCmllNZnlWoNwqk3mlqrn+jgXFrYpdXOIReXXgzgqmORa08G0LVID8DNbSCbuz6AgUWGAEItnRGAe4uYg43FkbH5LBEiRIgQIXKiSPQgnegv4ilEjkAm+ydabLrYueCK6gkOvcKB6QLnNS2qD/9PiBAhQoQIkf+HOHZXYrrEua2Kau6uk0C4u4gQIUKECJE8EqZ7k5kuS10pqsMyD4nyIOW5wkSIECFChMixiHkQ9SiOZL+RJwDTmfDumi8APFtk6W1HvFhktfZkbF4tott1L8bwLf9STa+W7+LEx+fX93O4LZIDzN9sNNQJAAAAAElFTkSuQmCC"},554:function(e,t,a){e.exports={default:a(555),__esModule:!0}},555:function(e,t,a){var i=a(60),l=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return l.stringify.apply(l,arguments)}},603:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(554),l=a.n(i),s=a(201);t.default={data:function(){return{form:{name:"",value:""},list:[],dabeList:[],dialogTableVisible:!1,dialogTableVisible1:!1,dialogTableVisible2:!1,options:[{value:"1",label:"添加表"},{value:"2",label:"添加库/业务包"},{value:"3",label:"ETL"},{value:"4",label:"SQL"},{value:"5",label:"EXCELL"}],tabNames:"",preTable:"",activeTabs:"0",columnName:"",columnDataList:[],columnIndex:0,color:"",color2:"",step:1,realcolumn:"",realtables:""}},computed:{},created:function(){var e=this;this.form.name=this.$route.query.name,s.a.get("website/pack/updatesource",{id:this.$route.query.id},function(t){e.list=t.list})},mounted:function(){},methods:{goback:function(){this.$router.go(-1)},handleFinish:function(){if(""===this.form.name)return this.$message.error("你还没给包命名哦");this.$router.push("/groupList")},handleIconClick:function(){alert("执行搜索")},handleTips:function(e){var t=this;t.dialogTableVisible=!0,t.tabNames=e.tableNames,s.a.get("website/pack/getColumn",{id:this.$route.query.id,tablename:e.tableNames},function(e){e.list.map(function(e,t){e.relationTables||(e.relationTables="none")}),t.dabeList=e.list,t.dabeList.map(function(e,a){if("1"===e.isJoin)return t.$refs.select_table.toggleRowSelection(e,!0)})})},select:function(e,t){"1"===t.isJoin?t.isJoin="2":t.isJoin="1"},selectedAll:function(e){e.map(function(e){"1"===e.isJoin?e.isJoin="2":e.isJoin="1"})},saveDate:function(){console.log(this.dabeList);var e=this;s.a.post("website/pack/updateDataById",{dabeList:l()(this.dabeList)},function(t){e.dialogTableVisible=!1})},deletePack:function(){var e=this,t=this;this.$confirm("此操作将永久删除该业务包, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.a.post("website/pack/deletePag",{id:t.$route.query.id,tablename:t.tabNames},function(e){t.dialogTableVisible=!1,t.list.map(function(e,a){e.tableNames===t.tabNames&&t.list.splice(a,1)})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},preWatch:function(){var e=this;e.dialogTableVisible1=!0,s.a.get("website/pack/findData",{id:e.$route.query.id,name:e.tabNames},function(t){e.preTable=t.mapData})},modalColumn:function(e,t){this.columnIndex=t,this.realtables="none"===e.relationTables?"":e.relationTables,this.realcolumn=e.relationColumn,e.correspondence&&(this.activeTabs=e.correspondence),this.columnName=e.columnName,this.dialogTableVisible2=!0},cho_item:function(e){this.activeTabs=e},removeDabe:function(){this.realtables="",this.realcolumn="",this.dabeList[this.columnIndex].relationTables="none",this.dabeList[this.columnIndex].relationColumn=""},contactTable:function(){var e=this;s.a.get("website/pack/getDataTable",{mainId:this.$route.query.id,tablename:this.tabNames},function(t){e.columnDataList=t.list})},addTabList:function(){var e={name:this.form.name,id:this.$route.query.id,list:this.list};this.$store.commit("addChooseTableList",e)},choseVal:function(){switch(this.form.value){case"添加库/业务包":this.addTabList(),this.$router.push({path:"/pack/listAdd/:id"});break;case"SQL":this.$router.push("/pack/packSQL");break;case"EXCELL":this.$router.push("/pack/packEXCELL");break;case"ETL":this.$router.push("/pack/packETL")}},choItem:function(e,t){this.color=t;var a=this;s.a.get("website/pack/getTableColumn",{mainId:this.$route.query.id,tablename:this.tabNames,classname:e.tabName},function(t){a.columnDataList=t.list,a.realtables=e.tabName,a.realcolumn="",a.step=2})},choItem2:function(e,t){this.color2=t,this.realcolumn=e,this.dabeList[this.columnIndex].relationTables=this.realtables,this.dabeList[this.columnIndex].relationColumn=e,this.dabeList[this.columnIndex].correspondence=this.activeTabs,this.columnDataList="",this.init()},init:function(){this.columnDataList="",this.step=1,this.color="",this.color2=""}}}},645:function(e,t,a){t=e.exports=a(28)(void 0),t.push([e.i,".page[data-v-534a460b]{position:relative}.header[data-v-534a460b]{height:40px;margin-top:5px;line-height:40px;border-bottom:1px solid #eee}.header .header_input[data-v-534a460b]{margin:.1rem .2rem;width:300px}.header .title[data-v-534a460b]{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.header .select[data-v-534a460b]{position:relative;top:-1px;left:10px}.dabeList[data-v-534a460b]{height:450px;width:95%;overflow-y:auto;padding:.2rem}.dabeList .span[data-v-534a460b]{cursor:pointer;border:1px solid #ddd;margin-right:1.9%;margin-top:5px;display:inline-block;width:10.1%;padding-right:.02rem;height:25px;line-height:25px;overflow-x:hidden;text-overflow:ellipsis;overflow-y:hidden;white-space:nowrap}.dabeList .span.active[data-v-534a460b]{background:#65cea7;color:#fff}.dabeList .span img[data-v-534a460b]{width:16px;height:16px;vertical-align:middle;margin:0 4px}.dialogHeader[data-v-534a460b]{height:50px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.dialogHeader .title[data-v-534a460b]{color:#317eac;font-weight:700}.dialogFooter[data-v-534a460b]{height:50px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.dialogFooter .el-button[data-v-534a460b]{margin-left:10px}.pos[data-v-534a460b]{position:absolute;top:59px;color:#1f2d3d;font-weight:700;z-index:100;right:70px}.relate_con[data-v-534a460b]{width:770px;height:150px;position:relative}.relate_con .box1[data-v-534a460b]{position:absolute;border:1px solid #ddd;background:#eee;width:180px;height:90px;top:30px;left:0;overflow:hidden}.relate_con .box .text[data-v-534a460b]{width:100%;height:45px;line-height:45px;text-align:center}.relate_con .box .text[data-v-534a460b]:first-child{border-bottom:1px solid #ddd}.relate_con .line1[data-v-534a460b]{position:absolute;background:#bbb;width:70px;height:1px;top:74.5px;left:180px;overflow:hidden}.relate_con .box2[data-v-534a460b]{position:absolute;border:1px solid #ddd;background:#eee;width:140px;height:130px;top:10px;left:250px;overflow:hidden}.relate_con .box2 .item[data-v-534a460b]{margin:8px 10px 0;background:#fff;width:120px;text-align:center;height:33px;line-height:33px}.relate_con .box2 .item.active[data-v-534a460b]{background:#2fa4e7;color:#fff}.relate_con .line2[data-v-534a460b]{position:absolute;background:#bbb;width:70px;height:1px;top:74.5px;left:390px;overflow:hidden}.relate_con .box3[data-v-534a460b]{position:absolute;border:1px solid #ddd;background:#eee;width:180px;height:90px;top:30px;left:460px;overflow:hidden}.relate_con .close[data-v-534a460b]{position:absolute;width:20px;height:20px;top:65px;right:40px}.relateDabeButton[data-v-534a460b]{width:100%;height:40px;text-align:right;padding-right:10px}.relateDabeButton button[data-v-534a460b]{width:120px;height:32px;border:none;background:#2fa4e7;color:#fff;border-radius:4px}",""])},687:function(e,t,a){var i=a(645);"string"==typeof i&&(i=[[e.i,i,""]]);a(29)(i,{});i.locals&&(e.exports=i.locals)},730:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page"},[i("div",{staticClass:"header"},[i("el-form",{ref:"form",staticClass:"title",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"业务包名"}},[i("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),i("el-select",{staticClass:"select",attrs:{filterable:"",placeholder:"请选择",size:"small"},on:{change:e.choseVal},model:{value:e.form.value,callback:function(t){e.form.value=t},expression:"form.value"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}))],1)],1),e._v(" "),i("div",{staticClass:"dabeList"},e._l(e.list,function(t){return i("span",{key:t.id,staticClass:"span",attrs:{title:t.tableNames},on:{click:function(a){e.handleTips(t)}}},[i("img",{attrs:{src:a(552),alt:""}}),e._v("\n            "+e._s(t.tableNames)+"\n        ")])})),e._v(" "),i("el-dialog",{staticClass:"mymodel",attrs:{visible:e.dialogTableVisible,size:"middle","show-close":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[i("div",{staticClass:"dialogHeader"},[i("p",{staticClass:"title"},[e._v("表数据设置")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.preWatch}},[e._v("表预览")])],1),e._v(" "),i("div",{staticClass:"pos"},[e._v("参与分析")]),e._v(" "),i("el-table",{ref:"select_table",attrs:{data:e.dabeList,border:"","max-height":250,"row-key":"id"},on:{"select-all":e.selectedAll,select:e.select}},[i("el-table-column",{attrs:{label:"原字段名",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{on:{click:function(a){e.modalColumn(t.row,t.$index)}}},[e._v(e._s(t.row.columnName))])]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"columnType",label:"类型",width:"150"}}),e._v(" "),i("el-table-column",{attrs:{label:"转义名",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-input",{staticClass:"noBorderInput",attrs:{size:"small"},model:{value:e.row.comments,callback:function(t){e.row.comments=t},expression:"scope.row.comments"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"关联表",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{attrs:{title:t.row.relationTables}},[e._v(e._s("none"===t.row.relationTables?"":t.row.relationTables))])]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"selection",width:"150","header-align":"left",align:"center","reserve-selection":!0}})],1),e._v(" "),i("div",{staticClass:"dialogFooter"},[i("el-button",{attrs:{type:"default",size:"small"},on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("关闭")]),e._v(" "),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.saveDate}},[e._v("保存")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.deletePack}},[e._v("移除业务包")])],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogTableVisible1,size:"middle",title:"表预览"},on:{"update:visible":function(t){e.dialogTableVisible1=t}}},[i("div",{staticStyle:{"overflow-x":"auto","overflow-y":"auto","max-height":"200px",width:"600px"}},[i("table",{staticClass:"table table-bordered",staticStyle:{"table-layout":"fixed","border-collapse":"collapse"}},[i("thead",[i("tr",e._l(e.preTable.list,function(t){return i("th",{staticStyle:{width:"150px","border-bottom-width":"1px"},attrs:{title:t}},[e._v("\n                        "+e._s(t.split("-")[0])+"\n                    ")])}))]),e._v(" "),i("tbody",e._l(e.preTable.alllist,function(t){return i("tr",e._l(t,function(t){return i("td",[e._v(e._s(t))])}))}))])])]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogTableVisible2,size:"middle",title:"表预览"},on:{"update:visible":function(t){e.dialogTableVisible2=t}}},[i("div",{staticClass:"relate_con"},[i("div",{staticClass:"box box1"},[i("div",{staticClass:"text",attrs:{id:"texttable"}},[e._v(e._s(e.tabNames))]),e._v(" "),i("div",{staticClass:"text",attrs:{id:"textid"}},[e._v(e._s(e.columnName))])]),e._v(" "),i("div",{staticClass:"box2"},[i("div",{class:"0"===e.activeTabs?"item active":"item",on:{click:function(t){e.cho_item("0")}}},[e._v("1:1")]),e._v(" "),i("div",{class:"1"===e.activeTabs?"item active":"item",on:{click:function(t){e.cho_item("1")}}},[e._v("1:N")]),e._v(" "),i("div",{class:"2"===e.activeTabs?"item active":"item",on:{click:function(t){e.cho_item("2")}}},[e._v("N:1")])]),e._v(" "),i("div",{staticClass:"box box3"},[i("div",{staticClass:"text",attrs:{id:"oppositetable"}},[e._v(e._s(e.realtables))]),e._v(" "),i("div",{staticClass:"text",attrs:{id:"oppositeid"}},[e._v(e._s(e.realcolumn))])]),e._v(" "),i("div",{staticClass:"line1"}),e._v(" "),i("div",{staticClass:"line2"}),e._v(" "),i("div",{staticClass:"close",on:{click:e.removeDabe}},[e._v("×")])]),e._v(" "),i("div",{staticClass:"relateDabeButton"},[i("el-button",{attrs:{type:"primary"},on:{click:e.contactTable}},[e._v("+ 关联到其他表")])],1),e._v(" "),1===e.step?i("div",{staticClass:"tablist"},e._l(e.columnDataList,function(t,l){return i("span",{key:l,class:e.color===l?"span active":"span",on:{click:function(a){e.choItem(t,l)}}},[i("img",{attrs:{src:a(552),alt:""}}),e._v("\n            "+e._s(t.tabName)+"\n        ")])})):e._e(),e._v(" "),2===e.step?i("div",{staticClass:"tablist"},e._l(e.columnDataList,function(t,l){return i("span",{key:l,class:e.color2===l?"span active":"span",on:{click:function(a){e.choItem2(t,l)}}},[i("img",{attrs:{src:a(552),alt:""}}),e._v("\n            "+e._s(t)+"\n        ")])})):e._e()])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=7.js.map?607810a8f6bea1e1ce97