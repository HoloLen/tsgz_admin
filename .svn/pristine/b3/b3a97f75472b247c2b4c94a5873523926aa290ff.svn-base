<template>
    <div class="page">
        <div class="app-container">
            <header>
                <span>你本次登录地为 : {{ipMsg.cname}}</span>
                <span>IP:{{ipMsg.cip}}</span>
            </header>
            <section class="msg">
                <div class="left">
                    <el-form label-position="right" label-width="100px" :model="loginMsg">
                        <el-form-item label="用户名：">
                            admin
                        </el-form-item>
                        <el-form-item label="昵称：">
                            <el-input v-model="loginMsg.name"></el-input>
                        </el-form-item>
                        <el-form-item label="性别：">
                            <el-radio-group v-model="loginMsg.sex">
                                <el-radio label="man">男</el-radio>
                                <el-radio label="woman">女</el-radio>
                            </el-radio-group>
                        </el-form-item>
                        <el-form-item label="邮箱：">
                            <el-input v-model="loginMsg.token"></el-input>
                        </el-form-item>
                        <el-form-item label="电话：">
                            <el-input v-model="loginMsg.token"></el-input>
                        </el-form-item>
                        <el-form-item label="手机：">
                            <el-input v-model="loginMsg.token"></el-input>
                        </el-form-item>
                    </el-form>
                </div>
                <div class="right">
                    <el-form  label-width="100px">
                        <el-form-item label="头像：" class="label_img">
                            <img :src="loginMsg.avatar" alt="用户头像" class="user_img">
                            <el-button type="text" class="el-button filter-item el-button&#45;&#45;primary"
                                       @click="uploadAvatar()">
                                <span>上传头像</span>
                            </el-button>
                        </el-form-item>
                        <el-form-item label="归属公司：">
                            杭州总公司
                        </el-form-item>
                        <el-form-item label="归属部门：">
                            终检界德

                        </el-form-item>
                        <el-form-item label="用户类型：">
                            无
                        </el-form-item>
                        <el-form-item label="用户角色：">
                            系统管理员
                        </el-form-item>
                        <el-form-item label="备注：">
                            <el-input v-model="loginMsg.token"></el-input>
                        </el-form-item>
                    </el-form>

                </div>
            </section>
        </div>
        <footer>
            <el-button type="primary"  size="large" @click="submitForm">
                <i class="el-icon-check"></i>
                提交</el-button>
        </footer>
    </div>
</template>

<script>
    import {mapGetters} from 'vuex';
    import {IPAddress} from '../../utils';
    export default {
        data() {
            return {
                editable: false,
                ipMsg:''
            }
        },
        computed: mapGetters(['loginMsg']),
        mounted() {
            this.ipMsg = IPAddress();
        },
        methods: {
            //提交表单
            submitForm() {
                var vm = this;
                vm.editable = false;
                var par = {
                    "status": vm.loginMsg.status,
                    "name": vm.loginMsg.name,
                    "token": vm.loginMsg.token,
                    "avatar":vm.loginMsg.avatar,
                    "sex": vm.loginMsg.sex,
                    "introduction": vm.loginMsg.introduction,
                };
                this.$store.commit("editUserINfo",par);

            },
            //取消
            resetForm(){
               this.editable=false;
            },
            //上传头像
            uploadAvatar(){
                alert('稍后补上')
            },
        }
    };
</script>

<style lang="scss">
    .app-container{
        margin:10px 1% 0;
        width:97%;
        overflow-x: hidden;
        header{
            display: flex;
            flex-wrap: nowrap;
            height:40px;
            line-height: 40px;
            span{
                color:#8d8d8d;
                font-size:0.12rem;
                &:nth-child(1){
                    padding-left:0.4rem;
                    display: inline-block;
                    width:7.5rem;
                }
            }
        }
        .msg{
            display: flex;
            .left{
                padding-top:0.3rem;
                width:6rem;
                margin-right:0.8rem;
            }
            .right{
                width:6rem;
            }
        }
    }
    .el-form-item{
        margin-bottom:5px;
    }
    .label_img{

        display: flex;
        align-items: center;
        img {
            max-width: 80px;
            max-height: 80px;
            border-radius: 50%;
            margin-right:5px;
            border:1px solid #ededed;
        }
        .el-form-item__content{
            position:relative;
            left:-1.3rem;
            display: flex;
            align-items: center;
        }
    }
    footer{
        width:12.8rem;
        text-align: center;
        margin-top:30px;
        button{
            width:3rem;
        }
    }
</style>
